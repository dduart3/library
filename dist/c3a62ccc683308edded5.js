import"./style.css";const $form=document.querySelector(".form"),$bookContainer=document.querySelector(".books-container__content"),getStorage=JSON.parse(localStorage.getItem("library")),setStorage=t=>{localStorage.setItem("library",JSON.stringify(t))},myLibrary=getStorage?Array.from(getStorage):[],addBookToLibrary=t=>{const o=JSON.stringify(t),e=JSON.parse(o);myLibrary.push(e),setStorage(myLibrary)};function Book(t,o,e,a,s){this.id=t,this.title=o,this.author=e,this.pages=a,this.read=s}function BookOptionsModal(){this.$bookOptionsModal=document.createElement("div"),this.$bookOptionsModalTitle=document.createElement("p"),this.$bookOptionsModalButtons=document.createElement("div"),this.$bookOptionsModalButtonsReadStatus=document.createElement("button"),this.$bookOptionsModalButtonsDelete=document.createElement("button"),this.$bookOptionsModalButtonsCancel=document.createElement("button"),this.$bookOptionsModal.classList.add("book-options-modal"),this.$bookOptionsModalTitle.classList.add("book-options-modal__title"),this.$bookOptionsModalButtons.classList.add("book-options-modal__buttons"),this.$bookOptionsModalButtonsReadStatus.classList.add("book-options-modal__buttons__read-status"),this.$bookOptionsModalButtonsDelete.classList.add("book-options-modal__buttons__delete"),this.$bookOptionsModalButtonsCancel.classList.add("book-options-modal__buttons__cancel"),this.$bookOptionsModalTitle.textContent="What do you wanna do?",this.$bookOptionsModalButtonsReadStatus.textContent="Change Read Status",this.$bookOptionsModalButtonsDelete.textContent="Delete",this.$bookOptionsModalButtonsCancel.textContent="Cancel",this.$bookOptionsModalButtons.appendChild(this.$bookOptionsModalButtonsReadStatus),this.$bookOptionsModalButtons.appendChild(this.$bookOptionsModalButtonsDelete),this.$bookOptionsModal.appendChild(this.$bookOptionsModalTitle),this.$bookOptionsModal.appendChild(this.$bookOptionsModalButtons),this.$bookOptionsModal.appendChild(this.$bookOptionsModalButtonsCancel),document.body.appendChild(this.$bookOptionsModal)}function createHtmlBook(t){const o=()=>!0===t.read,e=()=>o()?"Read":"Not read",a=document.createElement("div"),s=document.createElement("div"),n=document.createElement("p"),d=document.createElement("p"),i=document.createElement("p"),l=document.createElement("p");a.setAttribute("id",t.id),a.classList.add("book"),s.classList.add("book__cover"),n.classList.add("book__cover__title"),d.classList.add("book__cover__author"),i.classList.add("book__cover__pages"),l.classList.add("book__cover__read"),o()?l.classList.add("read"):l.classList.add("not-read"),e(),n.textContent=t.title,d.textContent=t.author,i.textContent=`${t.pages} pages`,l.textContent=e(),s.appendChild(n),s.appendChild(d),s.appendChild(i),s.appendChild(l),a.appendChild(s),$bookContainer.appendChild(a),a.addEventListener("click",(t=>{t.preventDefault();const o=a.getAttribute("id"),e=myLibrary[o],s=new BookOptionsModal;s.$bookOptionsModalButtonsReadStatus.addEventListener("click",(t=>{t.preventDefault(),!0===e.read?(e.read=!1,l.classList.replace("read","not-read"),l.textContent="Not Read"):(e.read=!0,l.classList.replace("not-read","read"),l.textContent="Read"),setStorage(myLibrary),s.$bookOptionsModal.remove()})),s.$bookOptionsModalButtonsDelete.addEventListener("click",(t=>{t.preventDefault(),myLibrary.splice(o,1),a.remove(),setStorage(myLibrary),s.$bookOptionsModal.remove()})),s.$bookOptionsModalButtonsCancel.addEventListener("click",(t=>{t.preventDefault(),s.$bookOptionsModal.remove()}))}))}const createBookFromForm=t=>new Book(myLibrary.length,t.target[0].value,t.target[1].value,t.target[2].value,t.target[3].checked);$form.addEventListener("submit",(t=>{t.preventDefault();const o=(e=t,new Book(myLibrary.length,e.target[0].value,e.target[1].value,e.target[2].value,e.target[3].checked));var e;addBookToLibrary(o),createHtmlBook(o),$form.reset()})),myLibrary.map((t=>createHtmlBook(t)));